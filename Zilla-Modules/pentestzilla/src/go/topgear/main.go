package main

import (
    "fmt"
    "os"
    "topgear/internal/core"
    "github.com/spf13/cobra"
)

func main() {
    var target string
    var output string
    
    var rootCmd = &cobra.Command{
        Use:   "topgear",
        Short: "topgear - Mobile Security Laboratory",
        Long: `topgear: Professional security testing platform for authorized research
		
Complete documentation: https://github.com/FJ-cyberzilla/topgear`,
        Run: func(cmd *cobra.Command, args []string) {
            if target == "" {
                cmd.Help()
                return
            }
            
            engine := core.NewEngine()
            if err := engine.Scan(target); err != nil {
                fmt.Fprintf(os.Stderr, "Error during scan: %v\n", err)
                os.Exit(1)
            }
        },
    }

    rootCmd.Flags().StringVarP(&target, "target", "t", "", "Target to scan (IP, hostname, or domain)")
    rootCmd.Flags().StringVarP(&output, "output", "o", "", "Output format (json, html, text)")
    
    if err := rootCmd.Execute(); err != nil {
        os.Exit(1)
    }
}
